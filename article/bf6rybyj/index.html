<!doctype html><html lang="en-US"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.19" /><meta name="theme" content="VuePress Theme Plume " /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><meta property="og:url" content="https://ar0m.com/article/bf6rybyj/"><meta property="og:site_name" content="My Blog"><meta property="og:title" content="My Gentoo Linux Upgrade Guide[dracut+systemdboot]"><meta property="og:description" content="My Gentoo Linux Upgrade Guide This Guide include two part, part one is package update, second part is kernel upgrade. Part one is suit for any Gentoo Linux machine, but part two..."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2025-07-30T12:42:24.000Z"><meta property="article:tag" content="kernel"><meta property="article:tag" content="gentoolinux"><meta property="article:modified_time" content="2025-07-30T12:42:24.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"My Gentoo Linux Upgrade Guide[dracut+systemdboot]","image":[""],"dateModified":"2025-07-30T12:42:24.000Z","author":[]}</script><script src="https://app.rybbit.io/api/script.js" data-site-id="493" defer></script><title>My Gentoo Linux Upgrade Guide[dracut+systemdboot] | My Blog</title><meta name="description" content="My Gentoo Linux Upgrade Guide This Guide include two part, part one is package update, second part is kernel upgrade. Part one is suit for any Gentoo Linux machine, but part two..."><link rel="preload" href="/assets/style-BCzToGkF.css" as="style"><link rel="stylesheet" href="/assets/style-BCzToGkF.css"><link rel="modulepreload" href="/assets/app-DUgIjcn9.js"><link rel="modulepreload" href="/assets/index.html-D8nIiCVF.js"><link rel="prefetch" href="/assets/index.html-Dnlb6Di1.js" as="script"><link rel="prefetch" href="/assets/index.html-CaVUHCzQ.js" as="script"><link rel="prefetch" href="/assets/index.html-i27f1Bkj.js" as="script"><link rel="prefetch" href="/assets/index.html-CzGDeWvW.js" as="script"><link rel="prefetch" href="/assets/index.html-DjYDqAYX.js" as="script"><link rel="prefetch" href="/assets/index.html-DUSLn3l-.js" as="script"><link rel="prefetch" href="/assets/index.html-mY2Cr0ur.js" as="script"><link rel="prefetch" href="/assets/index.html-ByA9iRiy.js" as="script"><link rel="prefetch" href="/assets/404.html-BDl4pAwl.js" as="script"><link rel="prefetch" href="/assets/index.html-D5Qolo97.js" as="script"><link rel="prefetch" href="/assets/index.html-BwrBVFUa.js" as="script"><link rel="prefetch" href="/assets/index.html-qVRu_74Y.js" as="script"><link rel="prefetch" href="/assets/index.html-BciW0O2H.js" as="script"><link rel="prefetch" href="/assets/index.html-DpIzjRKJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BvmpE6u-.js" as="script"><link rel="prefetch" href="/assets/index.html-D0kPq2-i.js" as="script"><link rel="prefetch" href="/assets/index.html-DtFbAyV1.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-DXWKOczD.js" as="script"><link rel="prefetch" href="/assets/searchBox-default-CkSr3qa5.js" as="script"><link rel="prefetch" href="/assets/searchBox-zh-BmVsdA2H.js" as="script"><link rel="prefetch" href="/assets/SearchBox-sbFmgBBM.js" as="script"><link rel="prefetch" href="/assets/twikoo.all.min-DbWRX0ta.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-C8BmsPCM.js" as="script"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-db19113b><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-8b4de3f1></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-8b4de3f1> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-db19113b data-v-2fdc1209><div class="vp-navbar" vp-navbar data-v-2fdc1209 data-v-31c9e6ba><div class="wrapper" data-v-31c9e6ba><div class="container" data-v-31c9e6ba><div class="title" data-v-31c9e6ba><div class="vp-navbar-title" data-v-31c9e6ba data-v-0d040614><a class="vp-link no-icon link title" href="/" data-v-0d040614 data-v-63ea1b8e><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" src="/logo/aptrue-sience-logo.png" alt data-v-682c7e26><!--]--><!--[--><img class="vp-image light logo" src="/logo/aptrue-sience-logo.png" alt data-v-682c7e26><!--]--><!--]--><!--]--><span data-v-0d040614>My Blog</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-31c9e6ba><div class="content-body" data-v-31c9e6ba><!--[--><!--]--><div class="vp-navbar-search search" data-v-31c9e6ba><div class="search-wrapper" data-v-3e52b42e><!----><div id="local-search" data-v-3e52b42e><button type="button" class="mini-search mini-search-button" aria-label="Search" data-v-3e52b42e><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">Search</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-31c9e6ba data-v-e9dcb62b><span id="main-nav-aria-label" class="visually-hidden" data-v-e9dcb62b>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/" tabindex="0" data-v-e9dcb62b data-v-15cc14d6 data-v-63ea1b8e><!--[--><span class="vp-icon vpi-nde3e73t" style="" data-v-15cc14d6 data-v-521c26d9></span><span data-v-15cc14d6>Home</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/" tabindex="0" data-v-e9dcb62b data-v-15cc14d6 data-v-63ea1b8e><!--[--><span class="vp-icon vpi-nzwwb0w3" style="" data-v-15cc14d6 data-v-521c26d9></span><span data-v-15cc14d6>Blog</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/tags/" tabindex="0" data-v-e9dcb62b data-v-15cc14d6 data-v-63ea1b8e><!--[--><span class="vp-icon vpi-zve8vhdo" style="" data-v-15cc14d6 data-v-521c26d9></span><span data-v-15cc14d6>Tags</span><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/blog/archives/" tabindex="0" data-v-e9dcb62b data-v-15cc14d6 data-v-63ea1b8e><!--[--><span class="vp-icon vpi-txfkhjm6" style="" data-v-15cc14d6 data-v-521c26d9></span><span data-v-15cc14d6>Archives</span><!--]--><!----></a><!--]--><!--]--></nav><div class="vp-flyout vp-navbar-translations translations" data-v-31c9e6ba data-v-10e51a2b data-v-5ae1f555><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Languages" data-v-5ae1f555><span class="text" data-v-5ae1f555><!----><span class="vpi-languages option-icon" data-v-5ae1f555></span><!----><span class="vpi-chevron-down text-icon" data-v-5ae1f555></span></span></button><div class="menu" data-v-5ae1f555><div class="vp-menu" data-v-5ae1f555 data-v-6e22303a><!----><!--[--><!--[--><div class="items" data-v-10e51a2b><p class="title" data-v-10e51a2b>English</p><!--[--><div class="vp-menu-link" data-v-10e51a2b data-v-6d886d53><a class="vp-link no-icon link" href="/zh/blog/" data-v-6d886d53 data-v-63ea1b8e><!--[--><!----> 简体中文<!--]--><!----></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="vp-navbar-appearance appearance" data-v-31c9e6ba data-v-9a653e4e><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-9a653e4e data-v-da7b93b9 data-v-c337035d><span class="check" data-v-c337035d><span class="icon" data-v-c337035d><!--[--><span class="vpi-sun sun" data-v-da7b93b9></span><span class="vpi-moon moon" data-v-da7b93b9></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-31c9e6ba data-v-ca827f87 data-v-a9e42453><!--[--><a class="vp-social-link no-icon" href="https://github.com/jindongjie" aria-label="github" target="_blank" rel="noopener" data-v-a9e42453 data-v-81f0d0d2><span class="vpi-social-github" /></a><a class="vp-social-link no-icon" href="https://matrix.to/#/@laythe:matrix.org" aria-label target="_blank" rel="noopener" data-v-a9e42453 data-v-81f0d0d2><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
viewBox="0 0 520 520" style="enable-background:new 0 0 520 520;" xml:space="preserve">
<path d="M13.7,11.9v496.2h35.7V520H0V0h49.4v11.9H13.7z"/>
<path d="M166.3,169.2v25.1h0.7c6.7-9.6,14.8-17,24.2-22.2c9.4-5.3,20.3-7.9,32.5-7.9c11.7,0,22.4,2.3,32.1,6.8
	c9.7,4.5,17,12.6,22.1,24c5.5-8.1,13-15.3,22.4-21.5c9.4-6.2,20.6-9.3,33.5-9.3c9.8,0,18.9,1.2,27.3,3.6c8.4,2.4,15.5,6.2,21.5,11.5
	c6,5.3,10.6,12.1,14,20.6c3.3,8.5,5,18.7,5,30.7v124.1h-50.9V249.6c0-6.2-0.2-12.1-0.7-17.6c-0.5-5.5-1.8-10.3-3.9-14.3
	c-2.2-4.1-5.3-7.3-9.5-9.7c-4.2-2.4-9.9-3.6-17-3.6c-7.2,0-13,1.4-17.4,4.1c-4.4,2.8-7.9,6.3-10.4,10.8c-2.5,4.4-4.2,9.4-5,15.1
	c-0.8,5.6-1.3,11.3-1.3,17v103.3h-50.9v-104c0-5.5-0.1-10.9-0.4-16.3c-0.2-5.4-1.3-10.3-3.1-14.9c-1.8-4.5-4.8-8.2-9-10.9
	c-4.2-2.7-10.3-4.1-18.5-4.1c-2.4,0-5.6,0.5-9.5,1.6c-3.9,1.1-7.8,3.1-11.5,6.1c-3.7,3-6.9,7.3-9.5,12.9c-2.6,5.6-3.9,13-3.9,22.1
	v107.6h-50.9V169.2H166.3z"/>
<path d="M506.3,508.1V11.9h-35.7V0H520v520h-49.4v-11.9H506.3z"/>
</svg></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-31c9e6ba data-v-4d9f8fb6 data-v-5ae1f555><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-5ae1f555><span class="vpi-more-horizontal icon" data-v-5ae1f555></span></button><div class="menu" data-v-5ae1f555><div class="vp-menu" data-v-5ae1f555 data-v-6e22303a><!----><!--[--><!--[--><div class="group translations" data-v-4d9f8fb6><p class="trans-title" data-v-4d9f8fb6>English</p><!--[--><div class="vp-menu-link" data-v-4d9f8fb6 data-v-6d886d53><a class="vp-link no-icon link" href="/zh/blog/" data-v-6d886d53 data-v-63ea1b8e><!--[--><!----> 简体中文<!--]--><!----></a></div><!--]--></div><div class="group" data-v-4d9f8fb6><div class="item appearance" data-v-4d9f8fb6><p class="label" data-v-4d9f8fb6>Appearance</p><div class="appearance-action" data-v-4d9f8fb6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-4d9f8fb6 data-v-da7b93b9 data-v-c337035d><span class="check" data-v-c337035d><span class="icon" data-v-c337035d><!--[--><span class="vpi-sun sun" data-v-da7b93b9></span><span class="vpi-moon moon" data-v-da7b93b9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-4d9f8fb6><div class="item social-links" data-v-4d9f8fb6><div class="vp-social-links social-links-list" data-v-4d9f8fb6 data-v-a9e42453><!--[--><a class="vp-social-link no-icon" href="https://github.com/jindongjie" aria-label="github" target="_blank" rel="noopener" data-v-a9e42453 data-v-81f0d0d2><span class="vpi-social-github" /></a><a class="vp-social-link no-icon" href="https://matrix.to/#/@laythe:matrix.org" aria-label target="_blank" rel="noopener" data-v-a9e42453 data-v-81f0d0d2><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
viewBox="0 0 520 520" style="enable-background:new 0 0 520 520;" xml:space="preserve">
<path d="M13.7,11.9v496.2h35.7V520H0V0h49.4v11.9H13.7z"/>
<path d="M166.3,169.2v25.1h0.7c6.7-9.6,14.8-17,24.2-22.2c9.4-5.3,20.3-7.9,32.5-7.9c11.7,0,22.4,2.3,32.1,6.8
	c9.7,4.5,17,12.6,22.1,24c5.5-8.1,13-15.3,22.4-21.5c9.4-6.2,20.6-9.3,33.5-9.3c9.8,0,18.9,1.2,27.3,3.6c8.4,2.4,15.5,6.2,21.5,11.5
	c6,5.3,10.6,12.1,14,20.6c3.3,8.5,5,18.7,5,30.7v124.1h-50.9V249.6c0-6.2-0.2-12.1-0.7-17.6c-0.5-5.5-1.8-10.3-3.9-14.3
	c-2.2-4.1-5.3-7.3-9.5-9.7c-4.2-2.4-9.9-3.6-17-3.6c-7.2,0-13,1.4-17.4,4.1c-4.4,2.8-7.9,6.3-10.4,10.8c-2.5,4.4-4.2,9.4-5,15.1
	c-0.8,5.6-1.3,11.3-1.3,17v103.3h-50.9v-104c0-5.5-0.1-10.9-0.4-16.3c-0.2-5.4-1.3-10.3-3.1-14.9c-1.8-4.5-4.8-8.2-9-10.9
	c-4.2-2.7-10.3-4.1-18.5-4.1c-2.4,0-5.6,0.5-9.5,1.6c-3.9,1.1-7.8,3.1-11.5,6.1c-3.7,3-6.9,7.3-9.5,12.9c-2.6,5.6-3.9,13-3.9,22.1
	v107.6h-50.9V169.2H166.3z"/>
<path d="M506.3,508.1V11.9h-35.7V0H520v520h-49.4v-11.9H506.3z"/>
</svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-31c9e6ba data-v-5b1f8215><span class="container" data-v-5b1f8215><span class="top" data-v-5b1f8215></span><span class="middle" data-v-5b1f8215></span><span class="bottom" data-v-5b1f8215></span></span></button></div></div></div></div><div class="divider" data-v-31c9e6ba><div class="divider-line" data-v-31c9e6ba></div></div></div><!----></header><div class="vp-local-nav fixed reached-top is-blog" data-v-db19113b data-v-3249d355><button class="hidden menu" disabled aria-expanded="false" aria-controls="SidebarNav" data-v-3249d355><span class="vpi-align-left menu-icon" data-v-3249d355></span><span class="menu-text" data-v-3249d355>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-3249d355 data-v-5f5c8015><button data-v-5f5c8015>Return to top</button><!----></div></div><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-db19113b data-v-36dcb8e5><div class="vp-doc-container is-blog" data-v-36dcb8e5 data-v-5d27b7b8><!--[--><!--]--><div class="container" data-v-5d27b7b8><!----><div class="content" data-v-5d27b7b8><div class="content-container" data-v-5d27b7b8><!--[--><!--]--><main class="main" data-v-5d27b7b8><nav class="vp-breadcrumb" data-v-5d27b7b8 data-v-85784952><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-85784952><!--[--><li property="itemListElement" typeof="ListItem" data-v-85784952><a class="vp-link no-icon link breadcrumb" href="/" property="item" typeof="WebPage" data-v-85784952 data-v-63ea1b8e><!--[-->Home<!--]--><!----></a><span class="vpi-chevron-right" data-v-85784952></span><meta property="name" content="Home" data-v-85784952><meta property="position" content="1" data-v-85784952></li><li property="itemListElement" typeof="ListItem" data-v-85784952><a class="vp-link no-icon link breadcrumb" href="/blog/" property="item" typeof="WebPage" data-v-85784952 data-v-63ea1b8e><!--[-->Blog<!--]--><!----></a><span class="vpi-chevron-right" data-v-85784952></span><meta property="name" content="Blog" data-v-85784952><meta property="position" content="2" data-v-85784952></li><li property="itemListElement" typeof="ListItem" data-v-85784952><a class="vp-link no-icon link breadcrumb" href="/blog/categories/?id=365d0f" property="item" typeof="WebPage" data-v-85784952 data-v-63ea1b8e><!--[-->gentoo<!--]--><!----></a><span class="vpi-chevron-right" data-v-85784952></span><meta property="name" content="gentoo" data-v-85784952><meta property="position" content="3" data-v-85784952></li><li property="itemListElement" typeof="ListItem" data-v-85784952><a class="vp-link no-icon link breadcrumb current" href="/article/bf6rybyj/" property="item" typeof="WebPage" data-v-85784952 data-v-63ea1b8e><!--[-->My Gentoo Linux Upgrade Guide[dracut+systemdboot]<!--]--><!----></a><!----><meta property="name" content="My Gentoo Linux Upgrade Guide[dracut+systemdboot]" data-v-85784952><meta property="position" content="4" data-v-85784952></li><!--]--></ol></nav><!--[--><h1 class="vp-doc-title page-title" data-v-86d0a979>My Gentoo Linux Upgrade Guide[dracut+systemdboot] <!----></h1><div class="vp-doc-meta" data-v-86d0a979><p class="reading-time" data-v-86d0a979><span class="vpi-books icon" data-v-86d0a979></span><span data-v-86d0a979>About 1751 words</span><span data-v-86d0a979>About 6 min</span></p><p data-v-86d0a979><span class="vpi-tag icon" data-v-86d0a979></span><!--[--><a class="vp-link no-icon link tag vp-tag-sld3" href="/blog/tags/?tag=kernel" data-v-86d0a979 data-v-63ea1b8e><!--[-->kernel<!--]--><!----></a><a class="vp-link no-icon link tag vp-tag-330s" href="/blog/tags/?tag=gentoolinux" data-v-86d0a979 data-v-63ea1b8e><!--[-->gentoolinux<!--]--><!----></a><!--]--></p><p class="create-time" data-v-86d0a979><span class="vpi-clock icon" data-v-86d0a979></span><span data-v-86d0a979>2025-6-17</span></p></div><!--]--><div class="_article_bf6rybyj_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-5d27b7b8><div data-v-5d27b7b8><h2 id="my-gentoo-linux-upgrade-guide" tabindex="-1"><a class="header-anchor" href="#my-gentoo-linux-upgrade-guide"><span>My Gentoo Linux Upgrade Guide</span></a></h2><ul><li>This Guide include two part, part one is package update, second part is kernel upgrade.</li><li>Part one is suit for any Gentoo Linux machine, but part two is customize version (We will customize kernel parameter and compile it by us manually!) is unfotanly need dracut for initramfs generate and systemboot for bootloader.If not, well, some command need to be chagne, but the general flow is same.</li><li>This is temperary for my PERSONAL REFRENCE ONLY, if you are newbee with Gentoo please read offical gentoo linux documentation first, this is for experianced user to refrence and optmize they update process.</li><li>Here is 2 offical guide you must read if you want to manage your Gentoo Linux: <ol><li><a href="https://wiki.gentoo.org/wiki/Portage" target="_blank" rel="noopener noreferrer">Portage Guide, about package management</a></li><li><a href="https://wiki.gentoo.org/wiki/Kernel" target="_blank" rel="noopener noreferrer">https://wiki.gentoo.org/wiki/Kernel, about kernel upgrade</a></li></ol></li></ul><h2 id="part-one-package-update" tabindex="-1"><a class="header-anchor" href="#part-one-package-update"><span>Part One Package Update</span></a></h2><h3 id="sync-with-repository" tabindex="-1"><a class="header-anchor" href="#sync-with-repository"><span>sync with repository</span></a></h3><ol><li>If you want to update all package for Gentoo Linux, first for all, you need sync all repository with upstream. there are two way to do this, first is fastest way --- download entire ebuild repository by using command:</li></ol><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">emerge-webrsync</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This is the way i recommand, just like other Linux distrobution, fast and easy.</p><ol start="2"><li>Use old-school &#39;--sync&#39; subcommand to sync with repository per package, this will cost lots of time if you install lots of package on your machine,but you get more control to this process. Here is section of offical doc for it: --sync Updates repositories, for which auto-sync, sync-type and sync-uri attributes are set in repos.conf. A list of repos or aliases can be specified, in which case they will be updated regardless of their auto-sync attribute. See portage(5) for more information. The PORTAGE_SYNC_STALE variable configures warnings that are shown when emerge --sync has not been executed recently.</li></ol><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">emerge</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --sync</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="update-package" tabindex="-1"><a class="header-anchor" href="#update-package"><span>update package</span></a></h3><p>After secusessful sync with repository, you able to update all packages! This is a long-long process if you don&#39;t have a super computer. So, with PC, i recommand to start update package before bedtime (Zzz) This is the command i recommand:</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">emworld</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  (alias </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">emworld=doas</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> emerge</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -avuDN</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> @world</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>I use a alias shortcut for it, in columns, there is full command. And commad meaning:</p><ol><li><p>-a :<br> Before performing the action, display what will take place (server info for --sync, --pretend output for merge, and so forth), then ask whether to proceed with the action or abort. Using --ask is more efficient than using --pretend and then executing the same command without --pretend, as dependencies will only need to be calculated once. &gt; [!warning] &gt;WARNING: If the &quot;Enter&quot; key is pressed at the prompt (with noother input), it is interpreted as acceptance of the first choice. &gt; Note that the input buffer is not cleared prior to the prompt, so an accidental press of the &quot;Enter&quot; key at any time prior to the prompt will be interpreted as a choice!</p></li><li><p>-v: Tell emerge to run in verbose mode. Currently this flag causes emerge to print out GNU info errors, if any, and to show the USE flags that will be used for each package when pretending. The following sym‐ bols are affixed to USE flags in order to indicate their status:</p><pre><code>     Symbol   Location    Meaning
     ──────────────────────────────────────────────────────────────

     -        prefix      not enabled (either disabled or removed)
     *        suffix      transition to or from the enabled state
     %        suffix      newly added or removed
     ()       circumfix   forced, masked, or removed
     {}       circumfix   state is bound to FEATURES settings
</code></pre></li><li><p>-u:<br> Updates packages to the best version available, which may not always be the highest version number due to masking for testing and development. Package atoms specified on the command line are greedy, meaning that unspecific atoms may match multiple versions of slotted packages. This option also implies the --selective option.</p></li><li><p>@world: excute behavior with all packages.</p></li></ol><p>Run the command, and read the output by section.</p><ul><li>Fist section is ebuild caculation part, it will automatic compare old and new synced version of package, list out packages gonna <em>new/update/reinstall/uninstall</em></li></ul><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ebuild     U  </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys-libs/glibc-2.41-r4:2.2::gentoo </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">2.40-r8:2.2::gentoo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> USE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cet multiarch (multilib) ssp stack-realign (static-libs) -audit -caps -compile-locales (-custom-cflags) -doc -gd -hash-sysv-compat -headers-only -multilib-bootstrap -nscd -perl -profile (-selinux) -suid -systemd -systemtap -test (-vanilla)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 18,974</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> KiB</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">ebuild     U  </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> sys-libs/ncurses-6.5_p20250329:0/6::gentoo </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">6.5_p20250125:0/6::gentoo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> USE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">cxx stack-realign (tinfo) -ada -debug -doc -gpm -minimal -profile (-split-usr) -static-libs -test -trace -verify-sig</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> ABI_X86</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">32 (64) (-x32)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 373</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> KiB</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Second section is conflict warning part</li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span></span></span>
<span class="line"><span>WARNING: One or more updates/rebuilds have been skipped due to a dependency conflict:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>dev-libs/icu:0</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  (dev-libs/icu-77.1:0/77::gentoo, ebuild scheduled for merge) USE=&quot;-debug -doc -examples -static-libs -test -verify-sig&quot; ABI_X86=&quot;32 (64) (-x32)&quot; conflicts with</span></span>
<span class="line"><span>    dev-libs/icu:0/76=[abi_x86_64(-)] required by (dev-libs/boost-1.85.0-r1:0/1.85.0.1::gentoo, installed) USE=&quot;bzip2 context icu nls stacktrace zlib -debug -doc -lzma -mpi -numpy -python -tools -zstd&quot; ABI_X86=&quot;(64) -32 (-x32)&quot; PYTHON_TARGETS=&quot;python3_12 -python3_10 -python3_11 -python3_13&quot;</span></span>
<span class="line"><span>                ^^^^^^               </span></span>
<span class="line"><span></span></span>
<span class="line"><span>dev-libs/boost:0</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  (dev-libs/boost-1.88.0-r1:0/1.88.0::gentoo, ebuild scheduled for merge) USE=&quot;bzip2 context icu nls stacktrace zlib -debug -doc -lzma -mpi -numpy -python -test -test-full -tools -zstd&quot; ABI_X86=&quot;(64) -32 (-x32)&quot; PYTHON_TARGETS=&quot;python3_13 -python3_11 -python3_12&quot; conflicts with</span></span>
<span class="line"><span>    &lt;dev-libs/boost-1.87:=[nls] required by (net-p2p/monero-0.18.3.4-r1:0/0::guru, ebuild scheduled for merge) USE=&quot;daemon readline tools wallet-cli wallet-rpc -hw-wallet&quot; ABI_X86=&quot;(64)&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Read it all and makesure nothing gona breake your system.</p><ul><li>Final part is rebuild list</li></ul><div class="language-haskell line-numbers-mode" data-ext="haskell" data-title="haskell"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>The following packages are causing rebuilds:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  (net-libs/miniupnpc-2.3.3-r1:0/21::gentoo, ebuild scheduled for merge) causes rebuilds for:</span></span>
<span class="line"><span>    (net-p2p/monero-0.18.3.4-r1:0/0::guru, ebuild scheduled for merge)</span></span>
<span class="line"><span>  (dev-cpp/abseil-cpp-20250127.1:0/2501.1.0::gentoo, ebuild scheduled for merge) causes rebuilds for:</span></span>
<span class="line"><span>    (media-libs/webrtc-audio-processing-1.3-r3:1/1::gentoo, ebuild scheduled for merge)</span></span>
<span class="line"><span>    (dev-libs/protobuf-30.2:0/30.2.0::gentoo, ebuild scheduled for merge)</span></span>
<span class="line"><span>    (dev-util/android-tools-35.0.2:0/0::gentoo, ebuild scheduled for merge)</span></span>
<span class="line"><span>    (dev-libs/re2-2024.07.02:0/11::gentoo, ebuild scheduled for merge)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>It simply list all package need rebulid for you to get a fuzzy thought about how much time current update will take.</p><p>If everything is OK, type &quot;yes&quot; to comfirm update!</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>Would you like to merge these packages? [Yes/No]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Wait a little bit of time, make sure emerge is doing things correct,then have a <em>good sleep!</em> If anything goes wrong, it will skip it, if no major error such as compiler or system level stuff, you can fix that easly, i may write more tutorial about those common error.</p><h2 id="part-two-kernel-upgrade" tabindex="-1"><a class="header-anchor" href="#part-two-kernel-upgrade"><span>Part Two Kernel upgrade</span></a></h2><p>I only install local compile kernel, this is safer and much customizable, make the OS more fast, flex and hacky.</p><h3 id="check-avaiable-kernel-version" tabindex="-1"><a class="header-anchor" href="#check-avaiable-kernel-version"><span>check avaiable kernel version:</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">equery</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> meta</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gentoo-sources</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>You will see a list of all avaliable version of gentoo official kernel(source code version).</p><h3 id="install-kernel-source-code" tabindex="-1"><a class="header-anchor" href="#install-kernel-source-code"><span>install kernel source code</span></a></h3><p>If you want to use stable kernel (above equery command text color for your architectrue is green), you can use this command to install:</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">emerge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =sys-kernel/gentoo-sources-6.15.8</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Or if you want to try newest, untested kernel, you can bravly choice version from masked stuff! ( above equery command text color four your architectrue is blue). And install using this set of command:</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">emerge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =sys-kernel/gentoo-sources-6.15.8</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --autounmask</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --autounmask-write</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dispatch-conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Let me expain, first &quot;--autounmask..&quot; afterfix is allow portage auto create a patch for portage configuraton for automatic unmask package you want to install. Then you can use_dispatch-conf_ to apply it:</p><blockquote><p>info dispatch-conf is designed to be run after merging new packages in order to see if there are updates to the configuration files. If a new configuration file will overwrite an old one, dispatch-conf will prompt the user for a decision about how to resolve the discrepancy. Advantages of dispatch-conf include easy rollback (changes to config files are stored either using patches or rcs) and the ability to automatically update config files that the user has never modified or that differ from the current version only in CVS cruft or white space.</p></blockquote><p>When package is unmasked, you able to install by running above emerge command again:</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">emerge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> =sys-kernel/gentoo-sources-6.15.8</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="config-kernel" tabindex="-1"><a class="header-anchor" href="#config-kernel"><span>config kernel</span></a></h3><p>First we should confirm kernel source code is exist and reconized for Gentoo Linux</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">/u/src</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ❯❯❯</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eselect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kernel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> list</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Available</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kernel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> symlink</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> targets:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   linux-6.1.127-gentoo</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   linux-6.1.129-gentoo</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   linux-6.1.132-gentoo</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   linux-6.12.1-gentoo</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   linux-6.14.3-gentoo</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">6</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   linux-6.15.0-gentoo</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">7</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">   linux-6.15.8-gentoo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can see i am currently on 6.15.0 version(* symbol) and we gonna hand by hand upgrade to 6.15.8, with my customize configuration! So i gona select 6.15.8 kernel</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">eselect</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kernel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 7</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Then, Gentoo gona change the softlink of &quot;/usr/src/linux&quot; to the kernel source-code we select. Second, we able to config the kernel! Jump in to &quot;/usr/src/linux&quot;</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/src/linux</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Then choice a good kernel configuration tool, i recommand nconfig, menuconfig is too old-school 😃</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">make</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nconfig</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Boom, you able to select what ever kernel function you want to use! You can read the offical linux kernel configuration manual by this link: <a href="https://wiki.gentoo.org/wiki/Kernel/Gentoo_Kernel_Configuration_Guide" target="_blank" rel="noopener noreferrer">gentoo kernel configuration guide</a></p><p>If you don&#39;t want to make any change, you can simply copy your old kernel config! for exsample as we saw above, i use linux-6.15 as previous kernel, so i need copy configuration form that old folder, just like this:</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/src/linux-6.15.0-gentoo/.config</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/src/linux</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="compile-kernel" tabindex="-1"><a class="header-anchor" href="#compile-kernel"><span>compile kernel</span></a></h3><p>Good, we need compile kernel! this will take a while...</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">make</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -j(nproc</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Or manual input count of your threads avaliable.</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">make</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -j(THREAD</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> COUNT</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> YOU</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> WANT</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Don&#39;t forget install module! it is really easy to forget.</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">make</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> modules_install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>When kernel and all module is ready, it is time to install it. (it should auto trigger your bootloader or something to auto copy vmlinux and initramfs to your boot partition, if it can do that, recheck the install process about whatever your bootloader is)</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">make</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Fantastic! and finally if you using nvidia graphic card same as me, you should reinstall nvidia-drivers</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">emerge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> x11-drivers/nvidia-drivers</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Finally, we can reboot the system, and check out your system is broke or not 😃 If someting go wrong, we also should use old backup kernel to diagnostic and fix the problem.</p><h2 id="end" tabindex="-1"><a class="header-anchor" href="#end"><span>End</span></a></h2><p>Yes, the end.</p></div><!----><!----><div class="vp-doc-copyright" data-v-5d27b7b8><h2 id="doc-copyright" tabindex="-1" class="vp-doc-header" data-v-ff61d5fd><a href="#doc-copyright" class="header-anchor" data-v-ff61d5fd><span data-v-ff61d5fd><!--[-->Copyright<!--]--></span></a></h2><div class="hint-container tip copyright-container" data-v-bad85900><!----><p data-v-bad85900><span data-v-bad85900>This article link:</span><a class="vp-link no-icon link" href="/article/bf6rybyj/" data-allow-mismatch data-v-bad85900 data-v-63ea1b8e><!--[-->/article/bf6rybyj/<!--]--><!----></a></p><p data-v-bad85900><span data-v-bad85900>License under:</span><a class="vp-link no-icon link" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noreferrer" data-v-bad85900 data-v-63ea1b8e><!--[-->Attribution-NonCommercial 4.0 International (CC-BY-NC-4.0)<!--]--><!----></a><!--[--><span class="vpi-license-cc" data-v-bad85900></span><span class="vpi-license-by" data-v-bad85900></span><span class="vpi-license-nc" data-v-bad85900></span><!--]--></p></div></div></div></main><footer class="vp-doc-footer" data-v-5d27b7b8 data-v-13ecc0ed><!--[--><!--]--><!----><!----><nav class="prev-next" data-v-13ecc0ed><div class="pager" data-v-13ecc0ed><a class="vp-link no-icon link pager-link prev" href="/article/ujthg5m9/" data-v-13ecc0ed data-v-63ea1b8e><!--[--><span class="desc" data-v-13ecc0ed>Previous page</span><span class="title" data-v-13ecc0ed>Fix alsa library error on Gentoo Linux(samplerate)</span><!--]--><!----></a></div><div class="pager" data-v-13ecc0ed><a class="vp-link no-icon link pager-link next" href="/article/gk5drfor/" data-v-13ecc0ed data-v-63ea1b8e><!--[--><span class="desc" data-v-13ecc0ed>Next page</span><span class="title" data-v-13ecc0ed>Theme Preview</span><!--]--><!----></a></div></nav></footer><div id="comment" class="twikoo-wrapper vp-comment" vp-comment darkmode="false" style="display:block;" data-v-5d27b7b8><div style="display: flex;
align-items: center;
justify-content: center;
height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);
--icon-size: 48px;
display: inline-block;
width: var(--icon-size);
height: var(--icon-size);
background-color: currentcolor;
-webkit-mask-image: var(--loading-icon);
mask-image: var(--loading-icon);
"></span></div><div id="twikoo-comment"></div></div><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-db19113b data-v-aca43306><span class="percent" data-allow-mismatch data-v-aca43306>0%</span><span class="show icon vpi-back-to-top" data-v-aca43306></span><svg aria-hidden="true" data-v-aca43306><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-aca43306></circle></svg></button><footer class="vp-footer" vp-footer data-v-db19113b data-v-b49a5e2c><!--[--><div class="container" data-v-b49a5e2c><p class="message" data-v-b49a5e2c>Powered by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><p class="copyright" data-v-b49a5e2c>Copyright © 2023-2025 jindongjie</p></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-DUgIjcn9.js" defer></script></body></html>