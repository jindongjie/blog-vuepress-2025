import{_ as s,c as a,e as i,o as t}from"./app-DUgIjcn9.js";const d={};function n(r,e){return t(),a("div",null,e[0]||(e[0]=[i(`<p>This guide explains how to configure a software RAID 5 array on Gentoo Linux using <code>mdadm</code>.</p><hr><h2 id="_1-install-mdadm" tabindex="-1"><a class="header-anchor" href="#_1-install-mdadm"><span>1. Install mdadm</span></a></h2><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">emerge</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --ask</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sys-fs/mdadm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="_2-prepare-your-disks" tabindex="-1"><a class="header-anchor" href="#_2-prepare-your-disks"><span>2. Prepare Your Disks</span></a></h2><p>Identify the drives, e.g., <code>/dev/sdb</code>, <code>/dev/sdc</code>, <code>/dev/sdd</code>.</p><p><strong>(Optional but recommended)</strong> Clear old RAID superblocks:</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mdadm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --zero-superblock</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sdb</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sdc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sdd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Partition each disk (recommended; use <code>fdisk</code>, <code>gdisk</code>, or <code>parted</code>). Mark partitions as type <code>fd</code> (Linux RAID autodetect) if using <code>fdisk</code>.</p><hr><h2 id="_3-create-the-raid-5-array" tabindex="-1"><a class="header-anchor" href="#_3-create-the-raid-5-array"><span>3. Create the RAID 5 Array</span></a></h2><p>Example with 3 disks/partitions:</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mdadm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --create</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/md0</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --level=5</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --raid-devices=3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sdb1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sdc1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/sdd1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>--level=5</code>: RAID 5</li><li><code>--raid-devices=3</code>: Number of drives (min 3)</li><li>Replace <code>/dev/sdX1</code> with your actual partition names.</li></ul><hr><h2 id="_4-monitor-array-creation" tabindex="-1"><a class="header-anchor" href="#_4-monitor-array-creation"><span>4. Monitor Array Creation</span></a></h2><p>Check progress:</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">watch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /proc/mdstat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Wait for the sync to complete before storing important data.</p><hr><h2 id="_5-create-a-filesystem" tabindex="-1"><a class="header-anchor" href="#_5-create-a-filesystem"><span>5. Create a Filesystem</span></a></h2><p>Example for ext4:</p><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkfs.ext4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/md0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="_6-mount-the-array" tabindex="-1"><a class="header-anchor" href="#_6-mount-the-array"><span>6. Mount the Array</span></a></h2><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt/raid</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mount</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/md0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt/raid</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_7-configure-array-auto-assembly-at-boot" tabindex="-1"><a class="header-anchor" href="#_7-configure-array-auto-assembly-at-boot"><span>7. Configure Array Auto-Assembly at Boot</span></a></h2><h3 id="a-save-array-details" tabindex="-1"><a class="header-anchor" href="#a-save-array-details"><span>a. Save array details:</span></a></h3><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mdadm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --detail</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --scan</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/mdadm.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="b-enable-mdadm-at-boot" tabindex="-1"><a class="header-anchor" href="#b-enable-mdadm-at-boot"><span>b. Enable mdadm at boot</span></a></h3><h4 id="openrc-gentoo-default" tabindex="-1"><a class="header-anchor" href="#openrc-gentoo-default"><span>OpenRC (Gentoo default):</span></a></h4><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rc-update</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mdadm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> boot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="systemd-if-in-use" tabindex="-1"><a class="header-anchor" href="#systemd-if-in-use"><span>Systemd (if in use):</span></a></h4><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mdadm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="c-add-to-etc-fstab-for-automatic-mounting" tabindex="-1"><a class="header-anchor" href="#c-add-to-etc-fstab-for-automatic-mounting"><span>c. Add to <code>/etc/fstab</code> for automatic mounting:</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>/dev/md0    /mnt/raid    ext4    defaults    0 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="_8-verify-everything" tabindex="-1"><a class="header-anchor" href="#_8-verify-everything"><span>8. Verify Everything</span></a></h2><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /proc/mdstat</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mdadm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --detail</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/md0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><ul><li><a href="https://wiki.gentoo.org/wiki/RAID" target="_blank" rel="noopener noreferrer">Gentoo Wiki: RAID</a></li><li><a href="https://wiki.gentoo.org/wiki/Mdadm" target="_blank" rel="noopener noreferrer">Gentoo Wiki: mdadm</a></li><li><a href="https://man7.org/linux/man-pages/man8/mdadm.8.html" target="_blank" rel="noopener noreferrer">mdadm man page</a></li></ul>`,44)]))}const o=s(d,[["render",n],["__file","index.html.vue"]]),h=JSON.parse('{"path":"/article/v4kbg406/","title":"Setup software RAID with Gentoo","lang":"en-US","frontmatter":{"title":"Setup software RAID with Gentoo","createTime":"2025/09/14 07:14:56","permalink":"/article/v4kbg406/","description":"This guide explains how to configure a software RAID 5 array on Gentoo Linux using mdadm. 1. Install mdadm 2. Prepare Your Disks Identify the drives, e.g., /dev/sdb, /dev/sdc, /...","head":[["meta",{"property":"og:url","content":"https://ar0m.com/article/v4kbg406/"}],["meta",{"property":"og:site_name","content":"My Blog"}],["meta",{"property":"og:title","content":"Setup software RAID with Gentoo"}],["meta",{"property":"og:description","content":"This guide explains how to configure a software RAID 5 array on Gentoo Linux using mdadm. 1. Install mdadm 2. Prepare Your Disks Identify the drives, e.g., /dev/sdb, /dev/sdc, /..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-09-14T07:14:43.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-14T07:14:43.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Setup software RAID with Gentoo\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-14T07:14:43.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":0.85,"words":255},"git":{"updatedTime":1757834083000},"autoDesc":true,"filePathRelative":"gentoo/Setup software RAID with Gentoo.md","categoryList":[{"id":"365d0f","sort":10001,"name":"gentoo"}]}');export{o as comp,h as data};
